{{define "content"}}
<div class="container">
  <h2>ルーター一覧</h2>
  <div class="router-grid">
    {{range $id, $router := .Routers}}
    <div class="router-card">
      <h3><a href="/router/{{$id}}">{{$router.Name}}</a></h3>
      <div class="router-id">ID: {{$id}}</div>
      <div class="router-info">
        <div>インターフェース数: {{len $router.Interfaces}}</div>
        <div>RIP: {{if $router.RIPEnabled}}有効{{else}}無効{{end}}</div>
      </div>
      <div class="interfaces">
        <h4>インターフェース</h4>
        <ul>
          {{range $ifName, $iface := $router.Interfaces}}
          <li>
            <span class="if-name">{{$ifName}}</span>:
            <span class="if-ip">{{$iface.IPAddress}}</span>
            <span class="if-status {{if $iface.IsUp}}up{{else}}down{{end}}">
              {{if $iface.IsUp}}UP{{else}}DOWN{{end}}
            </span>
          </li>
          {{end}}
        </ul>
      </div>
      <div class="router-actions">
        <a href="/router/{{$id}}" class="btn">詳細を表示</a>
      </div>
    </div>
    {{end}}
  </div>

  <h2>リンク一覧</h2>
  <div class="link-list">
    <table>
      <thead>
        <tr>
          <th>ID</th>
          <th>接続元</th>
          <th>接続先</th>
          <th>帯域幅</th>
          <th>レイテンシ</th>
          <th>状態</th>
          <th>アクション</th>
        </tr>
      </thead>
      <tbody>
        {{range $id, $link := .Links}}
        <tr>
          <td>{{$id}}</td>
          <td>
            {{with $router := index $.Routers $link.Endpoint1.RouterID}}
            {{$router.Name}} ({{$link.Endpoint1.InterfaceName}})
            {{end}}
          </td>
          <td>
            {{with $router := index $.Routers $link.Endpoint2.RouterID}}
            {{$router.Name}} ({{$link.Endpoint2.InterfaceName}})
            {{end}}
          </td>
          <td>{{$link.Bandwidth}}kbps</td>
          <td>{{$link.Latency}}ms</td>
          <td class="link-status {{if $link.IsUp}}up{{else}}down{{end}}">
            {{if $link.IsUp}}稼働中{{else}}停止中{{end}}
          </td>
          <td>
            <form action="/api/link/status" method="post">
              <input type="hidden" name="link_id" value="{{$id}}">
              <input type="hidden" name="is_up" value="{{if $link.IsUp}}false{{else}}true{{end}}">
              <button type="submit" class="btn-small {{if $link.IsUp}}btn-danger{{else}}btn-success{{end}}">
                {{if $link.IsUp}}停止する{{else}}開始する{{end}}
              </button>
            </form>
          </td>
        </tr>
        {{end}}
      </tbody>
    </table>
  </div>

  <div class="action-panel">
    <h2>ルーターシミュレーション操作</h2>
    <div class="panel-actions">
      <a href="/topology" class="btn btn-primary">トポロジー表示</a>
      <button class="btn" id="simulate-traffic">トラフィック生成</button>
    </div>
  </div>
</div>
{{end}}
