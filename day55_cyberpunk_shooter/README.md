# Day55 - サイバーパンク 3D スペースシューター

React Three Fiber (R3F) を使った本格的なサイバーパンク風3Dスペースシューティングゲームです。大量の敵と戦う爽快なアクションゲームを実装しました。

https://github.com/user-attachments/assets/c4a2d2c4-db53-4d0a-b7ee-724135a355cb

[100日チャレンジ day55](https://zenn.dev/gin_nazo/scraps/d3b0b39197cd82)

## ゲーム概要

プレイヤーは3D空間でサイバーパンク風の宇宙戦闘機を操縦し、次々と押し寄せる敵を撃退します。敵は多様な形状・サイズ・動きを持ち、スコアが上がるにつれて難易度も上昇する本格的なシューティングゲームです。

## 主な機能

### ゲームシステム
- **3D空間での戦闘**: React Three Fiber による本格的な3D描画
- **マウス操作**: 直感的なマウス移動でプレイヤーを上下左右に操作
- **ホーミング弾システム**: 自動で最も近い敵を狙撃する誘導弾
- **大量敵出現**: 0.4秒間隔で3-5体の敵が同時出現
- **難易度連動**: スコア200点ごとに敵の出現数が増加（最大10体）

### 敵の多様性
- **4種類の形状**: 立方体、球体、円柱、円錐がランダムに出現
- **ランダム回転**: 各敵が独自の回転速度・方向を持つ
- **サイズバリエーション**: 0.6〜1.2倍のランダムサイズ
- **カラフルな色彩**: HSL色相によるランダムカラーとエミッシブ効果

### ビジュアル効果
- **サイバーパンク風デザイン**: ネオンカラーとエミッシブマテリアル
- **星空背景**: 5000個の星による宇宙空間の演出
- **多彩なライティング**: 環境光、指向性光、ポイントライト

## 操作方法

- **移動**: マウスカーソルの動きに追従して機体が移動
- **射撃**: スペースキーまたはマウスクリック
- **ゲーム開始**: 「START GAME」ボタンをクリック
- **リスタート**: ゲームオーバー時に「PLAY AGAIN」ボタンでリスタート

## ゲームルール

- **体力**: 200ポイントからスタート
- **スコア**: 敵を1体倒すごとに10点獲得
- **ダメージ**: 敵がプレイヤーに接触すると10ダメージ
- **ゲームオーバー**: 体力が0になると終了
- **難易度上昇**: スコア200点ごとに敵の出現数が1体増加

## 技術的特徴

### 3D描画・物理
- **React Three Fiber**: 高性能な3D描画エンジン
- **Three.js**: 3D数学計算とジオメトリ処理
- **@react-three/drei**: 便利な3Dコンポーネント（カメラ、星空）

### 状態管理・UI
- **Zustand**: 軽量で高性能な状態管理
- **メモ化最適化**: React.memo による不要な再描画防止
- **useFrame**: 60FPSでの滑らかなアニメーション

### アルゴリズム
- **ホーミング弾**: ベクトル計算による誘導システム
- **衝突判定**: 3D距離計算による精密な当たり判定
- **ランダム生成**: 敵の形状・色・回転・位置の多様化

## アーキテクチャ

```
GameScene.tsx
├── GameStore (Zustand)        # ゲーム状態管理
├── Player                     # プレイヤー機体
├── BulletMesh                 # 弾丸システム
├── EnemyMesh                  # 敵システム
├── GameLogic                  # ゲームロジック
├── GameScene3D                # 3Dシーン統合
└── GameUI                     # UI/HUD
```

## 使用技術スタック

- **フレームワーク**: Next.js (App Router)
- **言語**: TypeScript
- **3D描画**: React Three Fiber + Three.js
- **3Dヘルパー**: @react-three/drei
- **状態管理**: Zustand
- **ID生成**: nanoid
- **スタイリング**: Tailwind CSS
- **開発**: npm + Biome

## 開始方法

1. **依存パッケージをインストール**
   ```bash
   npm install
   ```

2. **開発サーバーを起動**
   ```bash
   npm run dev
   ```
   ブラウザで [http://localhost:3001](http://localhost:3001) を開いてゲームを開始できます。

3. **プレイ開始**
   - 「START GAME」ボタンをクリック
   - マウスで機体を操作し、スペースキーまたはクリックで射撃
   - 大量の敵を撃破してハイスコアを目指しましょう！

## パフォーマンス最適化

- **メモ化**: React.memo による不要な再レンダリング防止
- **ID検証**: 無効な弾・敵の自動削除システム
- **効率的な衝突判定**: 必要最小限の計算で高精度判定
- **状態管理**: Zustand による軽量で高速な状態更新

## 今後の拡張予定

- 爆発エフェクトのパーティクルシステム
- 弾の軌跡エフェクト
- ブルームエフェクト等のポストプロセッシング
- サウンドシステム（BGM・効果音）
- 背景都市景観のリッチ化

---

**制作**: 100日チャレンジ Day55  
**ジャンル**: 3Dスペースシューティングゲーム  
**プレイ時間**: 無制限（エンドレス）  
**難易度**: スコア連動で段階的上昇  
**制作日**: 2025年06月03日
