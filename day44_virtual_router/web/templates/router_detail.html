{{define "router_detail_content"}}
<div class="brutalist-card mb-6">
    <h3 class="text-xl font-bold mb-2 uppercase">Router Information</h3>
    <p><strong>ID:</strong> {{.RouterData.ID}}</p>
    <p><strong>TUN Interface:</strong> {{if .RouterData.TUNInterface}}{{.RouterData.TUNInterface.Name}}{{else}}N/A{{end}}</p>
    <p><strong>TUN IP:</strong> {{.RouterData.TUNIPNetString}}</p>
    <p><strong>Status:</strong>
        {{if .RouterData.IsRunning}}
            <span class="font-bold text-green-600">RUNNING</span>
        {{else}}
            <span class="font-bold text-red-600">STOPPED</span>
        {{end}}
    </p>
    <p><strong>OSPF Enabled:</strong>
        {{if .RouterData.OSPFEnabled}}
            <span class="font-bold text-blue-600">YES</span>
        {{else}}
            <span class="font-bold text-gray-600">NO</span>
        {{end}}
    </p>
</div>

<div class="brutalist-card mb-6">
    <h3 class="text-xl font-bold mb-3 uppercase border-b-2 border-black pb-1">Routing Table</h3>
    {{if .RoutingTable}}
    <div class="overflow-x-auto">
        <table class="brutalist-table w-full">
            <thead>
                <tr>
                    <th>Destination</th>
                    <th>Next Hop</th>
                    <th>Interface</th>
                    <th>Metric</th>
                    <th>Type</th>
                </tr>
            </thead>
            <tbody>
                {{range .RoutingTable}}
                <tr>
                    <td>{{.Destination.String}}</td>
                    <td>{{if .NextHop}}{{.NextHop.String}}{{else}}-{{end}}</td>
                    <td>{{.Interface}}</td>
                    <td>{{.Metric}}</td>
                    <td>{{.Type}}</td>
                </tr>
                {{end}}
            </tbody>
        </table>
    </div>
    {{else}}
    <p>Routing table is empty.</p>
    {{end}}
</div>

{{if .RouterData.OSPFEnabled}}
<div class="brutalist-card mb-6">
    <h3 class="text-xl font-bold mb-3 uppercase border-b-2 border-black pb-1">OSPF Link State Database (LSDB)</h3>
    {{if .LSDB}}
    <div class="overflow-x-auto">
        <table class="brutalist-table w-full">
            <thead>
                <tr>
                    <th>Advertising Router</th>
                    <th>Sequence No.</th>
                    <th>Timestamp</th>
                    <th>Link Count</th>
                    <th>TTL</th>
                </tr>
            </thead>
            <tbody>
                {{range .LSDB}}
                <tr>
                    <td>{{.AdvertisingRouterID}}</td>
                    <td>{{.SequenceNumber}}</td>
                    <td>{{.Timestamp.Format "2006-01-02 15:04:05"}}</td>
                    <td>{{len .Links}}</td>
                    <td>{{.TTL}}s</td>
                </tr>
                {{end}}
            </tbody>
        </table>
    </div>
    {{else}}
    <p>LSDB is empty or OSPF is not fully synchronized.</p>
    {{end}}
</div>

<div class="brutalist-card">
    <h3 class="text-xl font-bold mb-3 uppercase border-b-2 border-black pb-1">OSPF Neighbors</h3>
    {{if .OSPFNeighbors}}
    <div class="overflow-x-auto">
        <table class="brutalist-table w-full">
            <thead>
                <tr>
                    <th>Neighbor Router ID</th>
                    <!-- Add other neighbor details if available in OSPFNeighborData -->
                </tr>
            </thead>
            <tbody>
                {{range .OSPFNeighbors}}
                <tr>
                    <td>{{.RouterID}}</td>
                </tr>
                {{end}}
            </tbody>
        </table>
    </div>
    {{else}}
    <p>No OSPF neighbors established.</p>
    {{end}}
</div>
{{end}}

<!-- Placeholder for Add Static Route form -->
<!--
<div class="brutalist-card mt-6">
    <h3 class="text-xl font-bold mb-3 uppercase border-b-2 border-black pb-1">Add Static Route</h3>
    <form action="/router/{{.RouterData.ID}}/route/add" method="POST">
        <div class="mb-2">
            <label for="destCIDR" class="block font-bold">Destination CIDR:</label>
            <input type="text" id="destCIDR" name="destCIDR" class="brutalist-input w-full" placeholder="e.g., 10.100.0.0/16" required>
        </div>
        <div class="mb-2">
            <label for="nextHop" class="block font-bold">Next Hop IP:</label>
            <input type="text" id="nextHop" name="nextHop" class="brutalist-input w-full" placeholder="e.g., 192.168.0.2 (optional for P2P)">
        </div>
        <div class="mb-2">
            <label for="interface" class="block font-bold">Interface (Neighbor ID or TUN):</label>
            <input type="text" id="interface" name="interface" class="brutalist-input w-full" placeholder="e.g., R2 or {{.RouterData.TUNInterface.Name}}" required>
        </div>
        <div class="mb-4">
            <label for="metric" class="block font-bold">Metric:</label>
            <input type="number" id="metric" name="metric" class="brutalist-input w-full" value="10" min="1" required>
        </div>
        <button type="submit" class="brutalist-button">Add Static Route</button>
    </form>
</div>
-->

<div class="mt-6">
    <a href="/" class="brutalist-button">&laquo; Back to Overview</a>
</div>

{{end}}
