# Day 13: Raft 分散合意シミュレータ

Raft アルゴリズムの動作を視覚的に理解するためのシミュレータです。

https://github.com/user-attachments/assets/ed6e92f1-c675-47d7-aeb8-cda4d1d7e578

[100日チャレンジ day13 (Raft 分散合意シミュレータ)](https://zenn.dev/gin_nazo/scraps/4012fd77036c2e)

## 目的

*   Raft アルゴリズムの基本動作（リーダー選出、ログ複製、コミットメント）を視覚的に理解する。
*   クラスター構成の動的な変更（ノードの停止、再開、追加、削除）が Raft の動作に与える影響を観察する。

## 主な機能

-   **ノードの視覚化**: 各 Raft ノードを円で表示し、現在の状態 (Follower, Candidate, Leader, Stopped) を色で示します。ノード ID、現在の Term、コミットインデックスも表示されます。
-   **インタラクティブなノード操作**:
    -   ノードをドラッグ＆ドロップで移動できます。
    -   ノードを**右クリック**するとコンテキストメニューが表示され、ノードの**停止 (Stop)** / **再開 (Resume)** / **削除 (Remove)** が可能です。
    -   Leader ノードのメニューからは、クライアントコマンド送信をシミュレートできます（現在はログに記録されるのみ）。
-   **動的なクラスター変更**: コントロールパネルからノードを追加できます。
-   **シミュレーション制御**:
    -   シミュレーションの**開始 (Start)** / **一時停止 (Pause)** / **ステップ実行 (Step)** が可能です。
    -   シミュレーションの**速度**をスライダーで調整できます。
    -   クラスターを初期状態に**リセット (Reset)** できます。
-   **詳細なイベントログ**:
    -   シミュレーション中に発生する主要なイベント（状態遷移、投票、リーダー選出、ハートビート送受信、ログのコミットなど）が時系列で表示されます。
    -   Term が変わるタイミングで区切り線が表示され、ログの流れを追いやすくなっています。
    -   イベントの種類（状態変化、投票、ログ/HB、クラスター操作、タイマー、メッセージ詳細）に基づいて表示するログを**フィルタリング**できます。
-   **メッセージの可視化**: ノード間で送受信されるメッセージ (RequestVote, AppendEntries など) が矢印で表示されます。
-   **Raft アルゴリズムの再現**:
    -   リーダー選出プロセス（ランダムな選挙タイムアウト、投票依頼、投票、過半数による決定）をシミュレートします。票が割れる (Split Vote) 状況も再現されます。
    -   リーダーによるハートビート送信と、Follower によるタイマーリセットを再現します。

## 使用技術

-   **フレームワーク**: Next.js (App Router)
-   **言語**: TypeScript
-   **スタイリング**: Tailwind CSS
-   **ドラッグ＆ドロップ**: React DnD
-   **状態管理**: React Context API

## 実行方法

1.  依存関係をインストール: `npm install`
2.  開発サーバーを起動: `npm run dev`
3.  ブラウザで `http://localhost:3001` を開く
