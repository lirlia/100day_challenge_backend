{{ define "content" }}
<div class="max-w-2xl mx-auto">
  <h1 class="text-3xl font-bold text-gray-800 mb-8">Todo App</h1>

  <!-- Todo作成フォーム -->
  <form action="/todos" method="POST" class="mb-8">
    <div class="flex gap-2">
      <input type="text" name="title" placeholder="新しいTodoを入力" required
        class="flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary">
      <button type="submit"
        class="px-4 py-2 bg-primary text-white rounded-lg hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-primary">
        追加
      </button>
    </div>
  </form>

  <!-- Todo一覧 -->
  <div class="space-y-4">
    {{ range .Todos }}
    <div class="bg-white p-4 rounded-lg shadow">
      <div class="flex items-center justify-between">
        <div class="flex items-center space-x-3">
          <input type="checkbox" name="completed" {{ if .Completed }}checked{{ end }}
            class="w-5 h-5 text-primary rounded focus:ring-primary">
          <span class="text-gray-800 {{ if .Completed }}line-through text-gray-500{{ end }}">{{ .Title }}</span>
        </div>
        <div class="flex space-x-2">
          <button onclick="deleteTodo('{{ .ID }}')" class="text-danger hover:text-red-600 focus:outline-none">
            削除
          </button>
        </div>
      </div>
    </div>
    {{ end }}
  </div>
</div>

<script>
  function deleteTodo(id) {
    if (confirm('このTodoを削除しますか？')) {
      fetch(`/todos/${id}`, {
        method: 'DELETE',
      }).then(() => {
        location.reload();
      });
    }
  }
</script>
{{ end }}