# Day64 - TinyEngine (シンプル2Dゲームエンジン)

Goで作成されたシンプルで使いやすい2Dゲームエンジンです。学習しやすい従来型オブジェクト指向設計を採用し、Ebitenライブラリを使用して実装されています。

https://github.com/user-attachments/assets/6d5700e1-777c-4c75-8129-49974e19c080

[100日チャレンジ day64 (C++によるゲームエンジン）](https://zenn.dev/gin_nazo/scraps/e1f58b63e4d0e7)

## 特徴

- **シンプルな設計**: 複雑なECSアーキテクチャを避け、学習しやすい従来型オブジェクト指向設計
- **2D専用**: Ebitenベースの高性能2D描画システム
- **Web管理画面**: レベルエディタとアセット管理のためのWeb UI
- **実用的な機能セット**: ゲーム制作に必要な最小限かつ実用的な機能を提供

## 主要機能

### ゲームエンジン (Go)
- **描画システム**: スプライト描画、基本アニメーション
- **物理システム**: 簡単な衝突検出、重力システム  
- **入力システム**: キーボード・マウス対応
- **シーンシステム**: 画面切り替え管理
- **アセット管理**: 画像・音声の読み込み・管理
- **サウンドシステム**: BGM・効果音再生

### Web管理画面 (Next.js)
- **レベルエディタ**: ドラッグ&ドロップでステージ作成
- **アセット管理**: 画像・音声ファイルのアップロード・管理
- **ゲーム設定**: パラメータ調整画面

## デモゲーム: シンプルプラットフォーマー

TinyEngineの機能を実証するためのプラットフォーマーゲームを含んでいます：

- プレイヤーキャラクターの移動・ジャンプ
- 敵キャラクター（パトロール型AI）
- コイン収集システム
- ゴール到達でステージクリア

## 技術スタック

### ゲームエンジン
- **言語**: Go 1.21+
- **描画**: Ebiten v2
- **音声**: Ebiten/audio
- **設定管理**: JSON + SQLite

### Web管理画面  
- **フレームワーク**: Next.js 15 (App Router)
- **言語**: TypeScript
- **スタイリング**: Tailwind CSS v4
- **データベース**: SQLite (better-sqlite3)

## 最新の修正内容 (2025年6月10日)

### スプライト描画システムの改善
- **問題**: レベルエディタで設定した大きなプラットフォーム（床）が、ゲーム画面では小さく表示される問題を修正
- **原因**: `DrawSprite` メソッドでスプライトのサイズ調整が行われていなかった
- **修正**: スプライトの実際の画像サイズと指定サイズの比率を計算し、描画時にスケーリングを適用

### 物理システムの最適化  
- **修正**: `PhysicsBody.Update()` の不適切な呼び出しを削除
- **改善**: 物理更新は `PhysicsWorld.Update()` で一括処理されるよう統一

## セットアップ

### 前提条件
- Go 1.21+
- Node.js 18+
- npm

### インストール

```bash
# 依存関係インストール
npm install
go mod download

# Web管理画面起動
npm run dev

# ゲーム起動  
npm run dev-game
```

## 使い方

### 1. Web管理画面でアセット準備
1. http://localhost:3001 にアクセス
2. アセット管理でゲーム用画像・音声をアップロード
3. レベルエディタでステージを作成・編集

### 2. ゲーム実行
```bash
npm run dev-game
```

### 3. ゲーム操作
- **移動**: 左右矢印キー or A/Dキー
- **ジャンプ**: スペースキー
- **終了**: ESCキー

## ディレクトリ構成

```
day64_game_engine/
├── cmd/game/           # ゲーム実行用メインファイル
├── engine/             # ゲームエンジンコア
│   ├── core/           # エンジン基本機能
│   ├── graphics/       # 描画システム
│   ├── physics/        # 物理システム  
│   ├── audio/          # サウンドシステム
│   └── assets/         # アセット管理
├── game/               # デモゲーム実装
│   ├── player/         # プレイヤーシステム
│   ├── enemies/        # 敵キャラクターシステム
│   └── items/          # アイテムシステム
├── app/                # Next.js Web管理画面
│   ├── api/            # REST API
│   ├── editor/         # レベルエディタ
│   └── assets/         # アセット管理画面
└── assets/             # ゲームアセット（画像・音声）
```

## 開発方針

- **学習しやすさ重視**: 複雑な設計パターンを避け、理解しやすいコード構成
- **実用性重視**: 実際にゲームが作れる必要最小限の機能セット
- **拡張性考慮**: 新しい機能を追加しやすい設計

## ライセンス

© 2025 Day64 Challenge Project. All rights reserved.

---

**Day64 / 100日チャレンジ - バックエンド学習プロジェクト**
